"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[696],{696:(e,t,s)=>{s.d(t,{SessionProvider:()=>eo,wV:()=>es});var n,a,o,r,i=s(5155),l=s(2115),c=s.t(l,2);class d extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let s=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${s}`}}class u extends d{}u.kind="signIn";class p extends d{}p.type="AdapterError";class h extends d{}h.type="AccessDenied";class v extends d{}v.type="CallbackRouteError";class y extends d{}y.type="ErrorPageLoop";class f extends d{}f.type="EventError";class g extends d{}g.type="InvalidCallbackUrl";class E extends u{constructor(){super(...arguments),this.code="credentials"}}E.type="CredentialsSignin";class x extends d{}x.type="InvalidEndpoints";class S extends d{}S.type="InvalidCheck";class w extends d{}w.type="JWTSessionError";class b extends d{}b.type="MissingAdapter";class _ extends d{}_.type="MissingAdapterMethods";class m extends d{}m.type="MissingAuthorize";class L extends d{}L.type="MissingSecret";class k extends u{}k.type="OAuthAccountNotLinked";class A extends u{}A.type="OAuthCallbackError";class C extends d{}C.type="OAuthProfileParseError";class U extends d{}U.type="SessionTokenError";class R extends u{}R.type="OAuthSignInError";class P extends u{}P.type="EmailSignInError";class T extends d{}T.type="SignOutError";class I extends d{}I.type="UnknownAction";class M extends d{}M.type="UnsupportedStrategy";class N extends d{}N.type="InvalidProvider";class O extends d{}O.type="UntrustedHost";class W extends d{}W.type="Verification";class j extends u{}j.type="MissingCSRF";class V extends d{}V.type="DuplicateConditionalUI";class $ extends d{}$.type="MissingWebAuthnAutocomplete";class D extends d{}D.type="WebAuthnVerificationError";class F extends u{}F.type="AccountNotLinked";class H extends d{}H.type="ExperimentalFeatureNotEnabled";class B extends d{}class J extends d{}async function X(e,t,s){var n;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o="".concat("undefined"==typeof window?"".concat(t.baseUrlServer).concat(t.basePathServer):t.basePath,"/").concat(e);try{let e={headers:{"Content-Type":"application/json",...(null==a?void 0:null===(n=a.headers)||void 0===n?void 0:n.cookie)?{cookie:a.headers.cookie}:{}}};(null==a?void 0:a.body)&&(e.body=JSON.stringify(a.body),e.method="POST");let t=await fetch(o,e),s=await t.json();if(!t.ok)throw s;return s}catch(e){return s.error(new B(e.message,e)),null}}function q(){return Math.floor(Date.now()/1e3)}function z(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e="https://".concat(e));let s=new URL(e||t),n=("/"===s.pathname?t.pathname:s.pathname).replace(/\/$/,""),a="".concat(s.origin).concat(n);return{origin:s.origin,host:s.host,path:n,base:a,toString:()=>a}}var G=s(7358);let K={baseUrl:z("http://localhost:3000").origin,basePath:z("http://localhost:3000").path,baseUrlServer:z(null!==(o=null!==(a=G.env.NEXTAUTH_URL_INTERNAL)&&void 0!==a?a:"http://localhost:3000")&&void 0!==o?o:G.env.VERCEL_URL).origin,basePathServer:z(null!==(r=G.env.NEXTAUTH_URL_INTERNAL)&&void 0!==r?r:"http://localhost:3000").path,_lastSync:0,_session:void 0,_getSession:()=>{}},Q=null;function Y(){return"undefined"==typeof BroadcastChannel?{postMessage:()=>{},addEventListener:()=>{},removeEventListener:()=>{},name:"next-auth",onmessage:null,onmessageerror:null,close:()=>{},dispatchEvent:()=>!1}:new BroadcastChannel("next-auth")}function Z(){return null===Q&&(Q=Y()),Q}let ee={debug:console.debug,error:console.error,warn:console.warn},et=null===(n=l.createContext)||void 0===n?void 0:n.call(c,void 0);function es(e){if(!et)throw Error("React Context is unavailable in Server Components");let t=l.useContext(et),{required:s,onUnauthenticated:n}=null!=e?e:{},a=s&&"unauthenticated"===t.status;return(l.useEffect(()=>{if(a){let e="".concat(K.basePath,"/signin?").concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));n?n():window.location.href=e}},[a,n]),a)?{data:t.data,update:t.update,status:"loading"}:t}async function en(e){var t;let s=await X("session",K,ee,e);return(null===(t=null==e?void 0:e.broadcast)||void 0===t||t)&&Y().postMessage({event:"session",data:{trigger:"getSession"}}),s}async function ea(){var e;let t=await X("csrf",K,ee);return null!==(e=null==t?void 0:t.csrfToken)&&void 0!==e?e:""}function eo(e){if(!et)throw Error("React Context is unavailable in Server Components");let{children:t,basePath:s,refetchInterval:n,refetchWhenOffline:a}=e;s&&(K.basePath=s);let o=void 0!==e.session;K._lastSync=o?q():0;let[r,c]=l.useState(()=>(o&&(K._session=e.session),e.session)),[d,u]=l.useState(!o);l.useEffect(()=>(K._getSession=async function(){let{event:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t="storage"===e;if(t||void 0===K._session){K._lastSync=q(),K._session=await en({broadcast:!t}),c(K._session);return}if(!e||null===K._session||q()<K._lastSync)return;K._lastSync=q(),K._session=await en(),c(K._session)}catch(e){ee.error(new J(e.message,e))}finally{u(!1)}},K._getSession(),()=>{K._lastSync=0,K._session=void 0,K._getSession=()=>{}}),[]),l.useEffect(()=>{let e=()=>K._getSession({event:"storage"});return Z().addEventListener("message",e),()=>Z().removeEventListener("message",e)},[]),l.useEffect(()=>{let{refetchOnWindowFocus:t=!0}=e,s=()=>{t&&"visible"===document.visibilityState&&K._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",s,!1),()=>document.removeEventListener("visibilitychange",s,!1)},[e.refetchOnWindowFocus]);let p=function(){let[e,t]=l.useState("undefined"!=typeof navigator&&navigator.onLine),s=()=>t(!0),n=()=>t(!1);return l.useEffect(()=>(window.addEventListener("online",s),window.addEventListener("offline",n),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}),[]),e}(),h=!1!==a||p;l.useEffect(()=>{if(n&&h){let e=setInterval(()=>{K._session&&K._getSession({event:"poll"})},1e3*n);return()=>clearInterval(e)}},[n,h]);let v=l.useMemo(()=>({data:r,status:d?"loading":r?"authenticated":"unauthenticated",async update(e){if(d)return;u(!0);let t=await X("session",K,ee,void 0===e?void 0:{body:{csrfToken:await ea(),data:e}});return u(!1),t&&(c(t),Z().postMessage({event:"session",data:{trigger:"getSession"}})),t}}),[r,d]);return(0,i.jsx)(et.Provider,{value:v,children:t})}}}]);