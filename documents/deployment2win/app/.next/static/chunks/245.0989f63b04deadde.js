"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[245],{245:(e,s,a)=>{a.r(s),a.d(s,{PdfViewer:()=>h});var t=a(5155),l=a(2115),c=a(4085),r=a(5007),x=a(9286),i=a(4857),n=a(4505);let m=(0,a(3394).A)("file-question-mark",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]);var d=a(9677);function h(e){let{fileUrl:s,fileName:a,downloadAllowed:h=!0,watermark:j,height:u="700px",showToolbar:f=!0}=e,[N,p]=(0,l.useState)(!0),[y,w]=(0,l.useState)(!1),[o,v]=(0,l.useState)(""),k=(0,l.useCallback)(()=>{h&&s&&y&&window.open(s,"_blank")},[h,s,y]);return(0,l.useEffect)(()=>{(async()=>{if(!s){p(!1),w(!1);return}try{let e=await fetch(s,{method:"HEAD"});w(e.ok),p(!1),e.ok||(404===e.status?v("PDF 文件不存在"):v("无法加载 PDF 文件 (错误 ".concat(e.status,")")))}catch(e){p(!1),w(!1),v("无法连接到服务器"),console.error("File check error:",e)}})()},[s]),(0,t.jsxs)("div",{className:f?"space-y-4":"h-full w-full",children:[f&&(0,t.jsx)(r.Zp,{children:(0,t.jsx)(r.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"font-medium",children:a}),j&&(0,t.jsxs)(x.E,{variant:"outline",className:"text-xs",children:["水印: ",j]})]}),h&&y&&(0,t.jsxs)(c.$,{size:"sm",variant:"default",onClick:k,children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"下载"]})]})})}),f?(0,t.jsx)(r.Zp,{children:(0,t.jsx)(r.Wu,{className:"p-0",children:(0,t.jsx)("div",{className:"w-full flex items-center justify-center",style:{height:u},children:N?(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)(n.A,{className:"h-8 w-8 animate-spin mx-auto text-blue-500"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"正在检查 PDF 文件..."})]}):o?(0,t.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,t.jsx)(m,{className:"h-16 w-16 mx-auto text-gray-400"}),(0,t.jsx)(d.Fc,{variant:"destructive",children:(0,t.jsx)(d.TN,{children:o})}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"请检查档案配置或联系管理员"})]}):y?(0,t.jsx)("iframe",{src:s,className:"w-full h-full border-0",title:a}):(0,t.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,t.jsx)(m,{className:"h-16 w-16 mx-auto text-gray-400"}),(0,t.jsx)(d.Fc,{children:(0,t.jsx)(d.TN,{children:"该档案没有关联的 PDF 文件"})}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"请先上传 PDF 文件或检查文件路径配置"})]})})})}):y?(0,t.jsx)("iframe",{src:s,className:"w-full h-full border-0",title:a}):N?(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)(n.A,{className:"h-8 w-8 animate-spin mx-auto text-blue-500"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"正在检查 PDF 文件..."})]})}):o?(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,t.jsx)(m,{className:"h-16 w-16 mx-auto text-gray-400"}),(0,t.jsx)(d.Fc,{variant:"destructive",children:(0,t.jsx)(d.TN,{children:o})}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"请检查档案配置或联系管理员"})]})}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,t.jsx)(m,{className:"h-16 w-16 mx-auto text-gray-400"}),(0,t.jsx)(d.Fc,{children:(0,t.jsx)(d.TN,{children:"该档案没有关联的 PDF 文件"})}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"请先上传 PDF 文件或检查文件路径配置"})]})})]})}}}]);