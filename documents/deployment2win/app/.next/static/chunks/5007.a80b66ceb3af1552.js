"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[245,5007],{245:(e,s,t)=>{t.r(s),t.d(s,{PdfViewer:()=>u});var a=t(5155),l=t(2115),r=t(4085),c=t(5007),i=t(9286),x=t(4857),n=t(4505);let d=(0,t(3394).A)("file-question-mark",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]);var m=t(9677);function u(e){let{fileUrl:s,fileName:t,downloadAllowed:u=!0,watermark:h,height:j="700px",showToolbar:f=!0}=e,[o,N]=(0,l.useState)(!0),[v,p]=(0,l.useState)(!1),[y,g]=(0,l.useState)(""),w=(0,l.useCallback)(()=>{u&&s&&v&&window.open(s,"_blank")},[u,s,v]);return(0,l.useEffect)(()=>{(async()=>{if(!s){N(!1),p(!1);return}try{let e=await fetch(s,{method:"HEAD"});p(e.ok),N(!1),e.ok||(404===e.status?g("PDF 文件不存在"):g("无法加载 PDF 文件 (错误 ".concat(e.status,")")))}catch(e){N(!1),p(!1),g("无法连接到服务器"),console.error("File check error:",e)}})()},[s]),(0,a.jsxs)("div",{className:f?"space-y-4":"h-full w-full",children:[f&&(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"font-medium",children:t}),h&&(0,a.jsxs)(i.E,{variant:"outline",className:"text-xs",children:["水印: ",h]})]}),u&&v&&(0,a.jsxs)(r.$,{size:"sm",variant:"default",onClick:w,children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"下载"]})]})})}),f?(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-0",children:(0,a.jsx)("div",{className:"w-full flex items-center justify-center",style:{height:j},children:o?(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(n.A,{className:"h-8 w-8 animate-spin mx-auto text-blue-500"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"正在检查 PDF 文件..."})]}):y?(0,a.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,a.jsx)(d,{className:"h-16 w-16 mx-auto text-gray-400"}),(0,a.jsx)(m.Fc,{variant:"destructive",children:(0,a.jsx)(m.TN,{children:y})}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"请检查档案配置或联系管理员"})]}):v?(0,a.jsx)("iframe",{src:s,className:"w-full h-full border-0",title:t}):(0,a.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,a.jsx)(d,{className:"h-16 w-16 mx-auto text-gray-400"}),(0,a.jsx)(m.Fc,{children:(0,a.jsx)(m.TN,{children:"该档案没有关联的 PDF 文件"})}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"请先上传 PDF 文件或检查文件路径配置"})]})})})}):v?(0,a.jsx)("iframe",{src:s,className:"w-full h-full border-0",title:t}):o?(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(n.A,{className:"h-8 w-8 animate-spin mx-auto text-blue-500"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"正在检查 PDF 文件..."})]})}):y?(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,a.jsx)(d,{className:"h-16 w-16 mx-auto text-gray-400"}),(0,a.jsx)(m.Fc,{variant:"destructive",children:(0,a.jsx)(m.TN,{children:y})}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"请检查档案配置或联系管理员"})]})}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,a.jsx)(d,{className:"h-16 w-16 mx-auto text-gray-400"}),(0,a.jsx)(m.Fc,{children:(0,a.jsx)(m.TN,{children:"该档案没有关联的 PDF 文件"})}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"请先上传 PDF 文件或检查文件路径配置"})]})})]})}},9677:(e,s,t)=>{t.d(s,{Fc:()=>i,TN:()=>x});var a=t(5155);t(2115);var l=t(1027),r=t(9602);let c=(0,l.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...l}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(c({variant:t}),s),...l})}function x(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...t})}}}]);