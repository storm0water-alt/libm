(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6013],{1552:(e,s,t)=>{Promise.resolve().then(t.bind(t,1765))},1765:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>E});var a=t(5155),r=t(2115),l=t(6046),n=t(2336),i=t(4085),c=t(5007),o=t(9286);function d(e){let{text:s,query:t,maxLength:r=150}=e;if(!s)return(0,a.jsx)("span",{className:"text-gray-400",children:"-"});if(!t.trim())return(0,a.jsx)("span",{children:s.length>r?"".concat(s.slice(0,r),"..."):s});let l=t.toLowerCase(),n=s.toLowerCase(),i=n.indexOf(l);if(-1===i)for(let e of t.trim().split(/\s+/).filter(e=>e.length>1)){let s=n.indexOf(e.toLowerCase());if(-1!==s){i=s;break}}if(-1===i)return(0,a.jsx)("span",{children:s.length>r?"".concat(s.slice(0,r),"..."):s});let c=Math.floor((r-t.length)/2),o=Math.max(0,i-c),d=Math.min(s.length,i+t.length+c),x=d<s.length?"...":"",m=s.slice(o,d),u=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),h=t.trim().split(/\s+/).filter(e=>e.length>1),g=h.map(e=>u(e)),f=RegExp("(".concat(g.join("|"),")"),"gi"),v=m.split(f);return(0,a.jsxs)("span",{children:[o>0?"...":"",v.map((e,s)=>{let t=e.toLowerCase();return h.some(e=>t===e.toLowerCase()||t.includes(e.toLowerCase())||e.toLowerCase().includes(t))?(0,a.jsx)("mark",{className:"bg-yellow-200 text-gray-900 px-0.5 rounded",children:e},s):(0,a.jsx)("span",{children:e},s)}),x]})}var x=t(5525),m=t(767),u=t(5765),h=t(3518),g=t(6967),f=t(745);function v(e){var s,t;let{results:l,allResults:n=l,query:v,pagination:p,processingTimeMs:j,filters:b,onPageChange:N,onFilterChange:y,onTitleClick:w}=e,{uniqueCategories:k,uniqueTags:C}=(0,r.useMemo)(()=>{let e=new Set,s=new Set;return n.forEach(t=>{t.category&&e.add(t.category),t.tags&&t.tags.forEach(e=>s.add(e))}),{uniqueCategories:Array.from(e).sort(),uniqueTags:Array.from(s).sort()}},[n]),z=e=>{let s=(null==b?void 0:b.tags)||[],t=s.includes(e)?s.filter(s=>s!==e):[...s,e];null==y||y({...b,tags:t.length>0?t:void 0})},S=((null==b?void 0:b.category)?1:0)+((null==b?void 0:null===(s=b.tags)||void 0===s?void 0:s.length)||0);return 0===l.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"未找到相关档案"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-4",children:['没有找到与 "',(0,a.jsx)("strong",{children:v}),'" 匹配的档案']}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 space-y-1",children:[(0,a.jsx)("p",{children:"建议："}),(0,a.jsxs)("ul",{className:"list-disc list-inside",children:[(0,a.jsx)("li",{children:"检查输入的拼写是否正确"}),(0,a.jsx)("li",{children:"尝试使用其他关键词"}),(0,a.jsx)("li",{children:"使用更通用的搜索词"})]})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(k.length>0||C.length>0)&&(0,a.jsxs)(c.Zp,{className:"border-l-4 border-l-purple-500",children:[(0,a.jsx)(c.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(c.ZB,{className:"text-lg flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-5 w-5"}),"筛选条件",S>0&&(0,a.jsx)(o.E,{variant:"secondary",children:S})]}),S>0&&(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",onClick:()=>{null==y||y({})},children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-1"}),"清除筛选"]})]})}),(0,a.jsxs)(c.Wu,{className:"space-y-4",children:[k.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"分类"}),(0,a.jsxs)(f.l6,{value:(null==b?void 0:b.category)||"all",onValueChange:e=>{null==y||y({...b,category:"all"===e?void 0:e})},children:[(0,a.jsx)(f.bq,{className:"w-full",children:(0,a.jsx)(f.yv,{placeholder:"选择分类"})}),(0,a.jsxs)(f.gC,{children:[(0,a.jsx)(f.eb,{value:"all",children:"全部分类"}),k.map(e=>(0,a.jsx)(f.eb,{value:e,children:e},e))]})]})]}),C.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"标签"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[C.slice(0,20).map(e=>{var s;let t=null==b?void 0:null===(s=b.tags)||void 0===s?void 0:s.includes(e);return(0,a.jsxs)(o.E,{variant:t?"default":"outline",className:"cursor-pointer transition-all ".concat(t?"bg-purple-600 hover:bg-purple-700":"hover:bg-purple-100 hover:border-purple-300"),onClick:()=>z(e),children:[e,t&&(0,a.jsx)(m.A,{className:"h-3 w-3 ml-1"})]},e)}),C.length>20&&(0,a.jsxs)(o.E,{variant:"outline",className:"text-gray-500",children:["+",C.length-20," 更多"]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["找到 ",(0,a.jsx)("span",{className:"font-semibold",children:p.total})," 个结果",(0,a.jsx)("span",{className:"mx-2",children:"•"}),"耗时 ",(0,a.jsxs)("span",{className:"font-semibold",children:[j,"ms"]})]}),(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{let e=new URLSearchParams({fromSearch:"true",q:v,...(null==b?void 0:b.category)&&{category:b.category},...(null==b?void 0:b.tags)&&b.tags.length>0&&{tags:b.tags.join(",")}});window.location.href="/archives?".concat(e.toString())},className:"flex items-center gap-2",children:["在档案管理中查看",(0,a.jsx)(u.A,{className:"h-4 w-4"})]}),((null==b?void 0:b.category)||(null==b?void 0:b.tags)&&b.tags.length>0)&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[b.category&&(0,a.jsxs)(o.E,{variant:"secondary",className:"flex items-center gap-1",children:["分类: ",b.category,(0,a.jsx)("button",{onClick:()=>null==y?void 0:y({...b,category:void 0}),className:"ml-1 hover:text-red-500",children:"\xd7"})]}),null===(t=b.tags)||void 0===t?void 0:t.map(e=>(0,a.jsxs)(o.E,{variant:"secondary",className:"flex items-center gap-1",children:["标签: ",e,(0,a.jsx)("button",{onClick:()=>{var s;return null==y?void 0:y({...b,tags:null===(s=b.tags)||void 0===s?void 0:s.filter(s=>s!==e)})},className:"ml-1 hover:text-red-500",children:"\xd7"})]},e)),(b.category||b.tags&&b.tags.length>0)&&(0,a.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>null==y?void 0:y({}),className:"text-xs",children:"清除筛选"})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,a.jsxs)(c.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(c.ZB,{className:"text-lg text-blue-600 hover:text-blue-800 hover:underline cursor-pointer",onClick:()=>null==w?void 0:w(e.archiveID),children:(0,a.jsx)(d,{text:e.title,query:v})}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2 text-sm text-gray-600",children:[e.archiveNo&&(0,a.jsxs)("span",{children:["档号: ",(0,a.jsx)("strong",{children:e.archiveNo})]}),e.responsible&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["责任者: ",e.responsible]})]}),e.docNo&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["文号: ",e.docNo]})]})]})]}),e.category&&(0,a.jsx)(o.E,{variant:"outline",children:e.category})]})}),(0,a.jsxs)(c.Wu,{children:[e.deptIssue&&(0,a.jsxs)("p",{className:"text-sm text-gray-700 mb-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"机构问题："}),(0,a.jsx)(d,{text:e.deptIssue,query:v})]}),e.remark&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:(0,a.jsx)(d,{text:e.remark,query:v,maxLength:200})}),e.tags&&e.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-3",children:e.tags.map(e=>(0,a.jsx)(o.E,{variant:"secondary",className:"text-xs",children:e},e))})]})]},e.archiveID))}),p.totalPages>1&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>N(p.page-1),disabled:1===p.page,children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-1"}),"上一页"]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,p.totalPages)}).map((e,s)=>{let t;return t=p.totalPages<=5?s+1:p.page<=3?s+1:p.page>=p.totalPages-2?p.totalPages-4+s:p.page-2+s,(0,a.jsx)(i.$,{variant:p.page===t?"default":"outline",size:"sm",onClick:()=>N(t),className:"min-w-[2.5rem]",children:t},"page-".concat(t,"-").concat(s))})}),(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>N(p.page+1),disabled:p.page===p.totalPages,children:["下一页",(0,a.jsx)(g.A,{className:"h-4 w-4 ml-1"})]})]}),(0,a.jsxs)("div",{className:"text-center text-sm text-gray-600",children:["第 ",p.page," / ",p.totalPages," 页"]})]})}var p=t(7837),j=t(4505),b=t(4081),N=t(1466),y=t(2423),w=t(4857),k=t(7711),C=t(247);let z=(0,k.default)(()=>t.e(5007).then(t.bind(t,245)).then(e=>({default:e.PdfViewer})),{loadableGenerated:{webpack:()=>[245]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)(j.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})})});function S(e){let{open:s,onOpenChange:t,archiveId:l}=e,[n,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(""),[x,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&l?f(l):(c(null),d(""))},[s,l]);let f=async e=>{u(!0);try{let s=await fetch("/api/archives/".concat(e));if(!s.ok)throw Error("Failed to fetch archive");let t=await s.json();c(t),d(t.fileUrl||"")}catch(e){console.error("Failed to fetch archive:",e)}finally{u(!1)}},v=async()=>{if(n&&o){g(!0);try{await (0,C.L)(n.archiveID),window.open(o,"_blank")}catch(e){console.error("Failed to log download:",e),window.open(o,"_blank")}finally{g(!1)}}},k=n?[{label:"档号",value:n.archiveNo,icon:b.A},{label:"全宗号",value:n.fondsNo},{label:"年度",value:n.year},{label:"保管期限",value:n.retentionPeriod},{label:"保管期限代码",value:n.retentionCode},{label:"责任者",value:n.responsible,icon:N.A},{label:"文号",value:n.docNo||"-"},{label:"日期",value:(e=>{if(!e)return"-";let s=new Date(e);return isNaN(s.getTime())?e:s.toLocaleDateString("zh-CN")})(n.date),icon:y.A},{label:"页数",value:n.pageNo||"-"},{label:"部门",value:n.deptIssue},{label:"盒号",value:n.boxNo},{label:"件号",value:n.pieceNo},{label:"机构代码",value:n.deptCode}].filter(e=>e.value):[];return(0,a.jsx)(p.lG,{open:s,onOpenChange:t,children:(0,a.jsx)(p.Cf,{className:"p-0 overflow-hidden",style:{width:"96vw",height:"96vh",maxWidth:"96vw",maxHeight:"96vh"},children:(0,a.jsxs)("div",{className:"flex h-full",children:[(0,a.jsx)("div",{className:"w-44 border-r bg-muted/30 flex-shrink-0 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-3 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),(0,a.jsx)(p.L3,{className:"text-sm font-semibold",children:"档案信息"})]}),(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>t(!1),children:(0,a.jsx)(m.A,{className:"h-3.5 w-3.5"})})]}),x?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(j.A,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"pb-3 border-b",children:(0,a.jsx)("h3",{className:"font-semibold text-base leading-tight break-words",children:n.title||"-"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[k.map((e,s)=>(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wide",children:e.label}),(0,a.jsxs)("div",{className:"flex items-start gap-1.5",children:[e.icon&&(0,a.jsx)(e.icon,{className:"h-3.5 w-3.5 text-muted-foreground flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{className:"text-xs break-words",children:e.value})]})]},s)),n.remark&&(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wide",children:"备注"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground break-words whitespace-pre-wrap",children:n.remark})]})]}),n.fileUrl&&(0,a.jsx)(i.$,{onClick:v,disabled:h,className:"w-full",size:"sm",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.A,{className:"h-3.5 w-3.5 mr-1.5 animate-spin"}),"下载中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.A,{className:"h-3.5 w-3.5 mr-1.5"}),"下载 PDF"]})})]}):null]})}),(0,a.jsx)("div",{className:"flex-1 flex flex-col min-w-0",children:(0,a.jsx)("div",{className:"flex-1 bg-background overflow-hidden",children:x?(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(j.A,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"正在加载档案信息..."})]})}):o?(0,a.jsx)(z,{fileUrl:o,fileName:(null==n?void 0:n.archiveNo)?"".concat(n.archiveNo,".pdf"):"档案.pdf",downloadAllowed:!1,height:"100%",showToolbar:!1}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,a.jsx)(b.A,{className:"h-16 w-16 mx-auto text-muted-foreground"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"该档案没有关联的 PDF 文件"})]})})})})]})})})}var A=t(853),_=t(9136),L=t(6709),P=t(4836);function E(){var e;let s=(0,l.useRouter)(),t=(0,l.useSearchParams)(),o=t.get("q")||"",d=parseInt(t.get("page")||"1"),x=t.get("category")||void 0,m=(null===(e=t.get("tags"))||void 0===e?void 0:e.split(",").filter(Boolean))||void 0,[u,h]=(0,r.useState)(o),[g,f]=(0,r.useState)([]),[p,b]=(0,r.useState)([]),[N,y]=(0,r.useState)({page:d,limit:20,total:0,totalPages:0}),[w,k]=(0,r.useState)(0),[C,z]=(0,r.useState)(!1),[L,P]=(0,r.useState)(null),[E,D]=(0,r.useState)({category:x,tags:m}),[q,$]=(0,r.useState)([]),[R,I]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("searchHistory");if(e)try{$(JSON.parse(e))}catch(e){console.error("Failed to parse search history:",e)}},[]);let Z=e=>{e.trim()&&$(s=>{let t=[e,...s.filter(s=>s!==e)].slice(0,10);return localStorage.setItem("searchHistory",JSON.stringify(t)),t})};(0,r.useEffect)(()=>{o&&U(o,d,E)},[o,d,E.category,E.tags]);let U=async(e,s,t)=>{z(!0),P(null);try{let a=new URLSearchParams({q:e,page:s.toString(),limit:"20"});t.category&&a.set("category",t.category),t.tags&&t.tags.length>0&&a.set("tags",t.tags.join(","));let r=await fetch("/api/search?".concat(a.toString()));if(!r.ok)throw Error("搜索失败");let l=await r.json();f(l.results),y(l.pagination),k(l.processingTimeMs),Z(e),t.category||t.tags&&0!==t.tags.length||b(l.results)}catch(e){console.error("Search error:",e),P(e instanceof Error?e.message:"搜索失败，请稍后重试")}finally{z(!1)}};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-8",children:"档案搜索"}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!u.trim())return;Z(u);let t=new URLSearchParams;t.set("q",u),E.category&&t.set("category",E.category),E.tags&&E.tags.length>0&&t.set("tags",E.tags.join(",")),s.push("/search?".concat(t.toString()))},className:"relative max-w-2xl mx-auto",children:[(0,a.jsx)(n.p,{value:u,onChange:e=>h(e.target.value),type:"text",placeholder:"输入档号、题名、机构问题、责任者、文号等关键词...",className:"h-14 text-lg px-6 pr-32",autoFocus:!0}),(0,a.jsx)(i.$,{type:"submit",className:"absolute right-2 top-1/2 -translate-y-1/2",size:"lg",disabled:C,children:C?(0,a.jsx)(j.A,{className:"h-5 w-5 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.A,{className:"h-5 w-5 mr-2"}),"搜索"]})})]})]}),L&&(0,a.jsx)(c.Zp,{className:"p-4 mb-6 border-red-200 bg-red-50",children:(0,a.jsx)("p",{className:"text-red-600",children:L})}),o&&!C&&!L&&g.length>0&&(0,a.jsx)(c.Zp,{className:"p-4 mb-6 border-blue-200 bg-blue-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["找到 ",(0,a.jsx)("span",{className:"font-semibold",children:N.total})," 个结果",(0,a.jsx)("span",{className:"mx-2",children:"•"}),"耗时 ",(0,a.jsxs)("span",{className:"font-semibold",children:[w,"ms"]})]}),(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",onClick:()=>s.push("/dashboard"),children:[(0,a.jsx)(_.A,{className:"w-4 h-4 mr-2"}),"数据看板"]})]})}),o?C?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(j.A,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:"搜索中..."})]}):(0,a.jsx)(v,{results:g,allResults:p,query:o,pagination:N,processingTimeMs:w,filters:E,onPageChange:e=>{let a=new URLSearchParams(t.toString());a.set("page",e.toString()),s.push("/search?".concat(a.toString()))},onFilterChange:e=>{D(e);let t=new URLSearchParams;t.set("q",o),t.set("page","1"),e.category&&t.set("category",e.category),e.tags&&e.tags.length>0&&t.set("tags",e.tags.join(",")),s.push("/search?".concat(t.toString()))},onTitleClick:e=>{I(e)}}):(0,a.jsx)(F,{searchHistory:q,onHistoryClick:e=>{h(e),Z(e),s.push("/search?q=".concat(encodeURIComponent(e)))},onClearHistory:()=>{$([]),localStorage.removeItem("searchHistory")}}),(0,a.jsx)(S,{open:!!R,onOpenChange:e=>{e||I(null)},archiveId:R})]})}function F(e){let{searchHistory:s,onHistoryClick:t,onClearHistory:r}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[s.length>0&&(0,a.jsxs)(c.Zp,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"最近搜索"}),(0,a.jsx)("button",{onClick:r,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"清空历史"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map((e,s)=>(0,a.jsxs)("button",{onClick:()=>t(e),className:"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-md text-sm text-gray-700 transition-colors flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"h-5 w-5 text-gray-400"}),(0,a.jsx)("span",{children:e})]},s))})]}),(0,a.jsxs)(c.Zp,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"快速操作"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("a",{href:"/archives",className:"flex items-center p-4 border rounded-md hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(b.A,{className:"h-5 w-5 mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"档案管理"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"查看和管理所有档案"})]})]}),(0,a.jsxs)("a",{href:"/import",className:"flex items-center p-4 border rounded-md hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(L.A,{className:"h-6 w-6 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"批量入库"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"导入新档案"})]})]}),(0,a.jsxs)("a",{href:"/logs",className:"flex items-center p-4 border rounded-md hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(P.A,{className:"h-6 w-6 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"操作日志"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"查看系统操作记录"})]})]}),(0,a.jsxs)("a",{href:"/dashboard",className:"flex items-center p-4 border rounded-md hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(_.A,{className:"h-6 w-6 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"数据看板"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"查看系统统计信息"})]})]})]})]}),(0,a.jsxs)(c.Zp,{className:"p-6 bg-blue-50 border-blue-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"搜索提示"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm text-gray-700",children:[(0,a.jsx)("li",{children:"• 支持搜索档号、题名、机构问题、责任者、文号、备注等字段"}),(0,a.jsx)("li",{children:"• 输入关键词后按回车或点击搜索按钮"}),(0,a.jsx)("li",{children:"• 可以使用分类和标签筛选结果"}),(0,a.jsx)("li",{children:"• 搜索结果会高亮显示匹配的文字"})]})]})]})}},9286:(e,s,t)=>{"use strict";t.d(s,{E:()=>c});var a=t(5155);t(2115);var r=t(2317),l=t(1027),n=t(9602);let i=(0,l.F)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:t="default",asChild:l=!1,...c}=e,o=l?r.DX:"span";return(0,a.jsx)(o,{"data-slot":"badge","data-variant":t,className:(0,n.cn)(i({variant:t}),s),...c})}},4085:(e,s,t)=>{"use strict";t.d(s,{$:()=>c,r:()=>i});var a=t(5155);t(2115);var r=t(2317),l=t(1027),n=t(9602);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-xs":"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:s,variant:t="default",size:l="default",asChild:c=!1,...o}=e,d=c?r.DX:"button";return(0,a.jsx)(d,{"data-slot":"button","data-variant":t,"data-size":l,className:(0,n.cn)(i({variant:t,size:l,className:s})),...o})}},5007:(e,s,t)=>{"use strict";t.d(s,{Wu:()=>c,ZB:()=>i,Zp:()=>l,aR:()=>n});var a=t(5155);t(2115);var r=t(9602);function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function n(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...t})}},7837:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>x,Es:()=>u,L3:()=>h,c7:()=>m,lG:()=>c,rr:()=>g});var a=t(5155);t(2115);var r=t(42),l=t(767),n=t(9602),i=t(4085);function c(e){let{...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"dialog",...s})}function o(e){let{...s}=e;return(0,a.jsx)(r.ZL,{"data-slot":"dialog-portal",...s})}function d(e){let{className:s,...t}=e;return(0,a.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function x(e){let{className:s,children:t,showCloseButton:i=!0,...c}=e;return(0,a.jsxs)(o,{"data-slot":"dialog-portal",children:[(0,a.jsx)(d,{}),(0,a.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",s),...c,children:[t,i&&(0,a.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(l.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",s),...t})}function u(e){let{className:s,showCloseButton:t=!1,children:l,...c}=e;return(0,a.jsxs)("div",{"data-slot":"dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...c,children:[l,t&&(0,a.jsx)(r.bm,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"outline",children:"Close"})})]})}function h(e){let{className:s,...t}=e;return(0,a.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",s),...t})}function g(e){let{className:s,...t}=e;return(0,a.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",s),...t})}},2336:(e,s,t)=>{"use strict";t.d(s,{p:()=>l});var a=t(5155);t(2115);var r=t(9602);function l(e){let{className:s,type:t,...l}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...l})}},745:(e,s,t)=>{"use strict";t.d(s,{bq:()=>x,eb:()=>u,gC:()=>m,l6:()=>o,yv:()=>d});var a=t(5155);t(2115);var r=t(5297),l=t(1719),n=t(8867),i=t(1902),c=t(9602);function o(e){let{...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"select",...s})}function d(e){let{...s}=e;return(0,a.jsx)(r.WT,{"data-slot":"select-value",...s})}function x(e){let{className:s,size:t="default",children:n,...i}=e;return(0,a.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":t,className:(0,c.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...i,children:[n,(0,a.jsx)(r.In,{asChild:!0,children:(0,a.jsx)(l.A,{className:"size-4 opacity-50"})})]})}function m(e){let{className:s,children:t,position:l="item-aligned",align:n="center",...i}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,align:n,...i,children:[(0,a.jsx)(h,{}),(0,a.jsx)(r.LM,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(g,{})]})})}function u(e){let{className:s,children:t,...l}=e;return(0,a.jsxs)(r.q7,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...l,children:[(0,a.jsx)("span",{"data-slot":"select-item-indicator",className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(n.A,{className:"size-4"})})}),(0,a.jsx)(r.p4,{children:t})]})}function h(e){let{className:s,...t}=e;return(0,a.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(i.A,{className:"size-4"})})}function g(e){let{className:s,...t}=e;return(0,a.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(l.A,{className:"size-4"})})}},9602:(e,s,t)=>{"use strict";t.d(s,{cn:()=>l});var a=t(3463),r=t(9795);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},247:(e,s,t)=>{"use strict";t.d(s,{L:()=>r});var a=t(5828);let r=(0,a.createServerReference)("4001573c496718f012e748331750816f84abe9b4fc",a.callServer,void 0,a.findSourceMapURL,"logArchiveDownloadAction")}},e=>{var s=s=>e(e.s=s);e.O(0,[9406,2291,8348,2269,8441,1517,7358],()=>s(1552)),_N_E=e.O()}]);