# 档案导入需求变更
每个档案有很多描述字段信息，这些信息需要档案管理员录入或导入，而不是程序生成。
## 档案的构成
档案是由一个 PDF 文件和档案描述字段[attachment/archive_field.csv]构成的，档案 PDF 文件的名称是"档号"
## 档案上传流程
- 当前的情况是：使用档案批量入库功能可以将档案导入到指定的存储目录，并且生成档案相关的描述字段。
- 之后的逻辑是：按当前的档案导入流程入库后，除了 id、创建时间等系统字段外，只需要将档案 PDF 文件名作为档案信息字段的"档号"，其他的字段均不需要生成，不赋值即可(赋值逻辑之后会有)。
## 新增档案信息上传功能
档案管理员会制作一份档案信息表(格式如[attachment/archive_field.csv])，管理员上传这个 csv 文件后，我们根据档号就可以将 csv 中对应的档案信息更新到我们档案信息表中，导入过程是异步的，可以显示导入进度，以及最终的导入结果（成功跟新多少条，失败多少条（原因是什么？失败的档号是多少，如找不到对应的档号文件））
### 导入前校验
用户选择档案信息 csv 文件后，需要进行 4 步骤：
1. 格式校验：需要列出有多少档案信息记录，其中档号是否有空白和重复，如果校验通过进入第 2 步
2. isExist 校验：可以将这些档号和数据库中的档案记录进行 isexist 校验，如果不存在则提示用户有多少不存在，并列出不存在的档号。
3. 如果 isExist 校验通过，则可以开始导入