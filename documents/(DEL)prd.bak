请你为我开发一个档案管理系统，核心功能要求如下：

### 1. 技术栈要求
模块	推荐工具	作用
前端预览	React-PDF-Viewer	提供专业的 PDF 预览、缩放、打印体验
搜索引擎	Meilisearch 实现标题、编号、简介的多字段秒级检索
全栈框架	Next.js 15  负责 UI 渲染、权限校验和 API 路由
数据库/ORM	PostgreSQL(Supabase) + Prisma Prisma 是目前开发效率最高的 ORM，提供自动生成的类型定义和可视化管理工具。
身份验证	NextAuth.js (Auth.js) 档案系统核心：支持 RBAC（基于角色的访问控制），开箱即用。
UI组件库	shadcn/ui + Tailwind CSS  2025 年的主流方案。代码高度可定制（Copy-paste 模式），不会因库升级导致样式崩溃。
存储 	本地硬盘存储存储物理  挂载 docker 目录
监控管理平台  coolify 提供自托管服务

1. 搜索功能方案：从“数据库查询”升级为“全文搜索”
虽然您不需要搜索 PDF 内部文字，但涉及“标题、简介、编号”等多字段搜索时，传统的 SQL LIKE 查询在档案量增长后会变得缓慢且难以处理模糊匹配（如错别字、关键词权重）。
推荐方案：Meilisearch + Next.js
理由： 它是一个轻量级、高性能的开源搜索引擎，比 Elasticsearch 易用得多。
实现： 档案元数据存入 PostgreSQL 的同时，同步一份到 Meilisearch。
优势： 支持即时搜索（Search-as-you-type），用户输入一个字，列表就实时过滤；自带分词和排名权重，确保最相关的档案排在前面。

2. PDF 预览功能方案：从“浏览器内置”升级为“专业预览组件”
推荐方案：React-PDF-Viewer (基于 PDF.js)
功能： 这是目前 React 生态中最强大的 PDF 预览库。它完美支持缩放、旋转、打印、搜索 PDF 内文字、缩略图侧边栏。
实现：
使用 PDF.js 作为底层渲染引擎。
在 Next.js 中通过 dynamic 导入预览组件（禁用 SSR，因为 PDF 渲染依赖浏览器 API）。
安全性： 可以通过该组件禁用右键下载或添加水印，这在档案管理中非常实用。

4. 针对“易维护和易部署”的特别建议
档案编号唯一性： 在 Prisma Schema 中，为“编号”字段设置 unique 索引，并使用 cuid() 或 uuid() 作为内部 ID，防止档案覆盖。
PDF 处理： 如果档案上传时很大，可以利用 Next.js 的 Server Actions 在上传后触发一个后台任务

### 2. 核心页面及功能要求
#### （1）登录页面
- 包含用户名、密码输入框，验证码（可选），登录按钮，记住密码、忘记密码功能
- 错误提示：用户名/密码 错误时优雅提示
- 样式：简洁的后台管理系统登录风格，包含系统名称“档案管理系统”
- 身份认证 token 有效期最长为 7 天

#### （2）首页/工作台
- 顶部：全局搜索图标，个人名称和头像的导航栏（系统名称、退出登录、用户信息）
- 左侧：侧边栏菜单（用户管理、档案管理、入库管理、操作日志、授权管理）
- 主区域：数据概览卡片（档案总数、待入库数量、今日操作次数）

#### （3）档案管理页面（核心）
- 查询区域：
  - 多条件查询栏：根据附录中档案字段中表头的所有字段都可以进行查询，默认显示常用查询字段（档号、题名（模糊匹配）、日期），剩余其他字段需要点击高级查询再进行显示。
  - 查询按钮、重置按钮，支持按字段筛选后的数据排序（按档案号/日期）
- 档案列表区域：
  - 表格展示档案所有字段（附录中档案字段中表头的所有字段）
  - 鼠标点击记录行，鼠标边上出现悬浮操作按钮：预览（PDF）、修改、删除、下载，每个操作按钮对应极简的小图标
  - 批量操作：批量删除、批量导出
  - 分页功能：每页条数选择、页码切换

##### 档案预览功能：
  通过该条档案记录的“档案ID”（唯一ID）匹配服务器中对应的PDF文件（档案ID=PDF文件名）
- 样式：弹窗宽度占屏幕80%、高度占屏幕75%，顶部为弹窗标题（显示“档案预览：[档案号]-[题名]”），底部为操作按钮，中间为PDF预览区域
- 核心操作按钮：
  - 缩放控制：放大（+）、缩小（-）、重置（100%）按钮
  - 翻页控制：上一页、下一页、页码跳转（显示“第X页/共Y页”）
  - 其他：下载PDF按钮（直接下载对应文件）、关闭弹窗按钮
- 异常处理：
  - 无对应PDF文件时，弹窗内显示“暂无可用的PDF预览文件”
  - PDF加载失败时，显示“文件加载失败，请重试”，并提供“重新加载”按钮
- 额外要求
  - PDF预览为本地/服务器文件预览，无需在线解析
  - 弹窗支持ESC键关闭，点击弹窗遮罩层不关闭（防止误操作）
  - 预览过程不阻塞页面其他操作

#### （4）搜索功能：
- 登录后跳转：用户完成登录操作后，默认跳转到极简的搜索页面（而非原列表页）
- 搜索触发：在搜索框输入关键词后，点击搜索按钮/按回车键，执行全局全文检索（非字段定向查询）
- 结果展示：检索完成后自动跳转到档案管理列表页面，列表中仅展示与关键词匹配的档案记录

##### 页面与交互要求
###### 搜索页面（登录后默认页）
- UI风格：严格对齐Google搜索页极简风格
  - 布局：页面居中，顶部仅保留系统logo/名称，核心区域为居中的大尺寸搜索框 + 下方1个极简按钮（“档案搜索”）
  - 搜索框：宽度默认页面 60% 宽度（可自适应页面宽度），预设提示文字（“输入题名搜一下“），点击无边框变化，输入时无字段筛选下拉（突出全局搜索属性）
  - 按钮：“档案搜索”为主要按钮（浅灰底色，hover变深）
- 交互：
  - 输入关键词后回车/点击“档案搜索”，按钮显示加载状态（转圈动画），无其他页面跳转 Loading
  - 无关键词输入时，搜索按钮置灰不可点击

###### 检索逻辑要求
- 检索类型：全局全文检索（非字段查询），检索范围覆盖每个档案的核心元数据字段（档号,题名,机构问题,责任者,文号,备注）
- 结果处理：检索完成后，将关键词等参数通过URL拼接（如?searchKey=xxx）传递到档案管理列表页

###### 档案列表页适配
- 接收参数：列表页解析URL中的搜索关键词参数
- 结果展示：仅展示后端返回的匹配档案记录，列表保留原有UI样式（无需修改），顶部增加“搜索结果：共X条 关键词：「xxx」”的文字提示
- 重置功能：列表页增加“返回搜索页”按钮，点击可回到登录后的默认搜索页面

#### （5）档案入库页面
- 存储地址需要手动配置
- 入库操作：选择本地文件夹后读取选择的目录及所有子目录中的PDF文件列表，选中后点击“入库”按钮，触发异步入库流程。避免重复触发入库流程。给每个 PDF 文档生成唯一 ID，并且入库后修改文档名称为唯一 ID 名称
- 进度展示：入库进度条（按文件展示拷贝进度）、状态（等待/进行中/完成/失败）
- 入库记录：展示历史入库记录（文件名称、入库时间、状态、操作人）

#### （6）操作日志页面
- 档案系统的合规性要求。利用 Prisma 的 Middleware 或 Next.js 的中间件记录所有敏感操作。
- 列表展示：操作人、操作类型（删除/修改/下载/入库）、操作对象（档案号+文件名）、操作时间、IP地址
- 日志筛选：按操作类型、时间范围筛选

#### （7）用户权限管理页面
- 用户列表：用户名、角色（管理员/普通用户）、创建时间、操作（编辑权限/删除）
- 新增用户：表单填写用户名、密码、角色分配

#### （8）授权管理页面
- 授权列表：设备码、授权码、有效期、创建时间、操作（编辑权限/删除）
- 新增授权：表单填写设备码、有效期



### 3. 后端功能设计
除了满足各功能页面的接口功能外，还有如下几个纯后端功能。
#### （1）license 校验功能
每次请求校验 license 是否过期，通过缓存解决性能问题

### 4. 开发要求
#### UI设计要求
- 风格：简洁、专业的后台管理系统风格，主色调建议使用深蓝色系
- 交互：
  - PDF预览：点击预览按钮弹出弹窗，内置PDF预览组件展示文件内容
  - 异步入库：点击入库后不阻塞页面，进度实时更新
  - 操作确认：删除/修改等敏感操作需弹出确认弹窗
  - 日志记录：所有操作（删除/修改/下载/入库）自动记录日志（仅需UI展示日志录入入口，无需后端逻辑）
#### 后端设计要求
  - 高内聚低耦合
  - 关注点分离
  - 数据完整性与幂等性
  - 异步处理与资源隔离
  - 无状态架构
  - 性能方案：引入 缓存层。频繁访问的档案元数据（如分类列表、热门搜索等）放入本地缓存，减轻磁盘 I/O 压力。
  - 目录结构 (易维护性)
    - 采用功能模块化的结构，避免逻辑混杂：
      ```
      archive-management
      ├── app/              # 路由与页面 (Next.js App Router)
      │   ├── (auth)/       # 登录/注册逻辑
      │   ├── (archive)/  # 核心档案管理逻辑
      │   │   ├── archives/ # 档案列表、详情
      │   │   └── api/      # 后端 API Routes
      ├── components/       # 通用 UI 组件 (shadcn)
      ├── lib/              # 共享库 (Prisma 实例, 校验逻辑)
      ├── services/         # 业务逻辑层 (处理档案审计、归档规则)
      ├── hooks/            # 客户端状态管理
      └── prisma/           # 数据库 Schema 定义
      ```
  - 数据交互模式 (开发效率)
    放弃传统的 fetch(API URL)，优先使用 Server Actions：
    直接调用： 前端表单直接调用服务端函数，无需编写多余的 API 路由。
    端到端类型安全： 修改数据库字段后，Prisma 自动更新类型，前端代码若未同步修改会直接报错。
  - 安全性设计 (稳定性)
    Zod 验证： 在 API 层和表单层使用 Zod 进行严格的输入校验，防止注入攻击和脏数据入库。
    RLS (行级安全)： 如果追求更高稳定性，可在 PostgreSQL 层开启 RLS，确保用户只能访问其权限内的档案。

# 附录
## 档案字段
表头：档号,全宗号,保管期限,保管期限代码,年度,机构问题代码,盒号,件号,题名,机构问题,责任者,文号,日期,页号,备注
行内容（示例）：00000-Y-2011-bgs-0001-00001,00000,永久,Y,2011,bgs,0001,00001,天津档案馆行政部办公用品申请,业务管理,本馆,津自博字[2011]2号,20210127,1,这就是一行示例